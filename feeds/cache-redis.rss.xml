<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>南乡清水 - cache-redis</title><link>/</link><description></description><lastBuildDate>Wed, 01 Aug 2018 19:01:00 +0800</lastBuildDate><item><title>Redis之慢查询日志</title><link>/cache-redis/cache-redis-slowlog.html</link><description>&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Redis&lt;/code&gt;提供了5种数据结构,但除此之外,&lt;code&gt;Redis&lt;/code&gt;还提供了注入慢查询分析,&lt;code&gt;Redis Shell&lt;/code&gt;、&lt;code&gt;Pipeline&lt;/code&gt;、事务、与&lt;code&gt;Lua&lt;/code&gt;脚本、&lt;code&gt;Bitmaps&lt;/code&gt;、&lt;code&gt;HyperLogLog&lt;/code&gt;、&lt;code&gt;PubSub&lt;/code&gt;、&lt;code&gt;GEO&lt;/code&gt;等附加功能,这些功能可以在某些场景发挥很重要的作用.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;慢查询分析&lt;/h3&gt;
&lt;p&gt;许多存储系统(如:&lt;code&gt;MySQL&lt;/code&gt;)提供慢查询日志帮助开发与运维人员定位系统存在的慢操作.所谓慢查询日志就是系统在命令执行前后计算每条命令的执行时间,当超过预设阈值,就将这条命令的相关信息(例如:发生时间,耗时,命令的详细信息)记录到慢查询日志中,&lt;code&gt;Redis&lt;/code&gt;也提供了类似的功能.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Redis&lt;/code&gt;命令执行流程:&lt;/strong&gt;
&lt;img alt="执行流程" src="https://upload-images.jianshu.io/upload_images/10175660-0384383b4cc4a92a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;发送命令&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;命令排队&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;命令执行&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;返回结果&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;需要注意,慢查询只统计步骤&lt;code&gt;3&lt;/code&gt;的时间,所以没有慢查询并不代表客户端没有超时问题.&lt;/p&gt;
&lt;h4&gt;1) 慢查询的两个配置参数&lt;/h4&gt;
&lt;p&gt;对于慢查询功能,需要明确两件事:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;预设阈值怎么设置?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;慢查询记录存放在那 …&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">nicky_chin</dc:creator><pubDate>Wed, 01 Aug 2018 19:01:00 +0800</pubDate><guid isPermaLink="false">tag:None,2018-08-01:/cache-redis/cache-redis-slowlog.html</guid><category>框架基础</category></item></channel></rss>